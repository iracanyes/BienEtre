CREATE TABLE be_position (id INT AUTO_INCREMENT NOT NULL, client_id INT NOT NULL, bloc_id INT NOT NULL, `order` INT NOT NULL, INDEX IDX_DA14E41A19EB6921 (client_id), INDEX IDX_DA14E41A5582E9C0 (bloc_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE be_abuse (id INT AUTO_INCREMENT NOT NULL, client_id INT NOT NULL, comment_id INT DEFAULT NULL, description LONGTEXT NOT NULL, entryDate DATETIME NOT NULL, INDEX IDX_8D37D5E319EB6921 (client_id), INDEX IDX_8D37D5E3F8697D13 (comment_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE be_image (id INT AUTO_INCREMENT NOT NULL, `order` INT NOT NULL, url VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE be_user (id INT AUTO_INCREMENT NOT NULL, locality INT DEFAULT NULL, township INT DEFAULT NULL, avatar_id INT NOT NULL, logo_id INT NOT NULL, email VARCHAR(255) NOT NULL, date_inscription DATETIME NOT NULL, nb_error_connection INT NOT NULL, banned TINYINT(1) NOT NULL, inscription_confirmed TINYINT(1) NOT NULL, postalCode INT DEFAULT NULL, user_type VARCHAR(255) NOT NULL, lastname VARCHAR(255) DEFAULT NULL, firstname VARCHAR(255) DEFAULT NULL, newsletter TINYINT(1) DEFAULT NULL, brandName VARCHAR(255) DEFAULT NULL, webSite VARCHAR(255) DEFAULT NULL, emailContact VARCHAR(255) DEFAULT NULL, phoneNumber VARCHAR(30) DEFAULT NULL, tvaNumber VARCHAR(20) DEFAULT NULL, UNIQUE INDEX UNIQ_CFE84D14E7927C74 (email), INDEX IDX_CFE84D14C5E8C7D9 (postalCode), INDEX IDX_CFE84D14E1D6B8E6 (locality), INDEX IDX_CFE84D14DB97BC62 (township), INDEX IDX_CFE84D1486383B10 (avatar_id), UNIQUE INDEX UNIQ_CFE84D14D631DDB3 (brandName), UNIQUE INDEX UNIQ_CFE84D142C46E2F0 (tvaNumber), INDEX IDX_CFE84D14F98F144A (logo_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE be_favorite (client_id INT NOT NULL, provider_id INT NOT NULL, INDEX IDX_F4FD8E3619EB6921 (client_id), INDEX IDX_F4FD8E36A53A8AA (provider_id), PRIMARY KEY(client_id, provider_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE be_provider_image (provider_id INT NOT NULL, image_id INT NOT NULL, INDEX IDX_BAEF89A6A53A8AA (provider_id), INDEX IDX_BAEF89A63DA5256D (image_id), PRIMARY KEY(provider_id, image_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE be_provider_service_category (provider_id INT NOT NULL, service_category_id INT NOT NULL, INDEX IDX_51CE7327A53A8AA (provider_id), INDEX IDX_51CE7327DEDCBB4E (service_category_id), PRIMARY KEY(provider_id, service_category_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE be_stage (id INT AUTO_INCREMENT NOT NULL, provider_id INT NOT NULL, name VARCHAR(255) NOT NULL, description LONGTEXT NOT NULL, pricing VARCHAR(255) NOT NULL, additionalInformation LONGTEXT DEFAULT NULL, startDate DATETIME NOT NULL, endDate DATETIME NOT NULL, datePublication DATETIME NOT NULL, expiryDate DATETIME NOT NULL, INDEX IDX_D7E4C5BBA53A8AA (provider_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE be_comment (id INT AUTO_INCREMENT NOT NULL, client_id INT NOT NULL, provider_id INT NOT NULL, title VARCHAR(255) NOT NULL, content LONGTEXT NOT NULL, vote INT NOT NULL, entryDate DATETIME NOT NULL, INDEX IDX_A57214A819EB6921 (client_id), INDEX IDX_A57214A8A53A8AA (provider_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE be_service_category (id INT AUTO_INCREMENT NOT NULL, image_id INT DEFAULT NULL, name VARCHAR(255) NOT NULL, description LONGTEXT NOT NULL, inFrontPage TINYINT(1) NOT NULL, isValid TINYINT(1) NOT NULL, UNIQUE INDEX UNIQ_59153AE05E237E06 (name), UNIQUE INDEX UNIQ_59153AE03DA5256D (image_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE be_promotion (id INT AUTO_INCREMENT NOT NULL, provider_id INT NOT NULL, service_category_id INT NOT NULL, name VARCHAR(255) NOT NULL, description LONGTEXT NOT NULL, pdf VARCHAR(255) DEFAULT NULL, startDate DATETIME NOT NULL, endDate DATETIME NOT NULL, publicationDate DATETIME NOT NULL, expiryDate DATETIME NOT NULL, INDEX IDX_F134BA38A53A8AA (provider_id), INDEX IDX_F134BA38DEDCBB4E (service_category_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE be_locality (id INT AUTO_INCREMENT NOT NULL, locality VARCHAR(255) NOT NULL, UNIQUE INDEX UNIQ_7DEEB809E1D6B8E6 (locality), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE be_postal_code (id INT AUTO_INCREMENT NOT NULL, code_postal INT NOT NULL, UNIQUE INDEX UNIQ_6024CCE9CC94AC37 (code_postal), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE be_bloc (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(255) NOT NULL, description LONGTEXT NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE be_township (id INT AUTO_INCREMENT NOT NULL, township VARCHAR(255) NOT NULL, UNIQUE INDEX UNIQ_47AFBC8DDB97BC62 (township), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE be_position ADD CONSTRAINT FK_DA14E41A19EB6921 FOREIGN KEY (client_id) REFERENCES be_user (id);
ALTER TABLE be_position ADD CONSTRAINT FK_DA14E41A5582E9C0 FOREIGN KEY (bloc_id) REFERENCES be_bloc (id);
ALTER TABLE be_abuse ADD CONSTRAINT FK_8D37D5E319EB6921 FOREIGN KEY (client_id) REFERENCES be_user (id);
ALTER TABLE be_abuse ADD CONSTRAINT FK_8D37D5E3F8697D13 FOREIGN KEY (comment_id) REFERENCES be_comment (id);
ALTER TABLE be_user ADD CONSTRAINT FK_CFE84D14C5E8C7D9 FOREIGN KEY (postalCode) REFERENCES be_postal_code (id);
ALTER TABLE be_user ADD CONSTRAINT FK_CFE84D14E1D6B8E6 FOREIGN KEY (locality) REFERENCES be_locality (id);
ALTER TABLE be_user ADD CONSTRAINT FK_CFE84D14DB97BC62 FOREIGN KEY (township) REFERENCES be_township (id);
ALTER TABLE be_user ADD CONSTRAINT FK_CFE84D1486383B10 FOREIGN KEY (avatar_id) REFERENCES be_image (id);
ALTER TABLE be_user ADD CONSTRAINT FK_CFE84D14F98F144A FOREIGN KEY (logo_id) REFERENCES be_image (id);
ALTER TABLE be_favorite ADD CONSTRAINT FK_F4FD8E3619EB6921 FOREIGN KEY (client_id) REFERENCES be_user (id) ON DELETE CASCADE;
ALTER TABLE be_favorite ADD CONSTRAINT FK_F4FD8E36A53A8AA FOREIGN KEY (provider_id) REFERENCES be_user (id) ON DELETE CASCADE;
ALTER TABLE be_provider_image ADD CONSTRAINT FK_BAEF89A6A53A8AA FOREIGN KEY (provider_id) REFERENCES be_user (id) ON DELETE CASCADE;
ALTER TABLE be_provider_image ADD CONSTRAINT FK_BAEF89A63DA5256D FOREIGN KEY (image_id) REFERENCES be_image (id) ON DELETE CASCADE;
ALTER TABLE be_provider_service_category ADD CONSTRAINT FK_51CE7327A53A8AA FOREIGN KEY (provider_id) REFERENCES be_user (id) ON DELETE CASCADE;
ALTER TABLE be_provider_service_category ADD CONSTRAINT FK_51CE7327DEDCBB4E FOREIGN KEY (service_category_id) REFERENCES be_service_category (id) ON DELETE CASCADE;
ALTER TABLE be_stage ADD CONSTRAINT FK_D7E4C5BBA53A8AA FOREIGN KEY (provider_id) REFERENCES be_user (id);
ALTER TABLE be_comment ADD CONSTRAINT FK_A57214A819EB6921 FOREIGN KEY (client_id) REFERENCES be_user (id);
ALTER TABLE be_comment ADD CONSTRAINT FK_A57214A8A53A8AA FOREIGN KEY (provider_id) REFERENCES be_user (id);
ALTER TABLE be_service_category ADD CONSTRAINT FK_59153AE03DA5256D FOREIGN KEY (image_id) REFERENCES be_image (id);
ALTER TABLE be_promotion ADD CONSTRAINT FK_F134BA38A53A8AA FOREIGN KEY (provider_id) REFERENCES be_user (id);
ALTER TABLE be_promotion ADD CONSTRAINT FK_F134BA38DEDCBB4E FOREIGN KEY (service_category_id) REFERENCES be_service_category (id);
